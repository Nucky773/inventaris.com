<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard — Inventaris</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<style>
    body{
        background:#0b0b14;
        color:white;
        font-family: 'Inter', sans-serif;
        margin:0;
        padding:0;
    }

    /* ===== SIDEBAR NEON GLASS ===== */
    .sidebar {
        width: 250px;
        height: 100vh;
        backdrop-filter: blur(18px);
        background: rgba(255, 255, 255, 0.03);
        border-right: 1px solid rgba(255,255,255,0.08);
        box-shadow: 6px 0 25px rgba(124, 58, 237, 0.25);
        padding: 25px;
        position: fixed;
        top: 0;
        left: 0;
    }

    .nav-link {
        background: rgba(255,255,255,0.02);
        padding: 12px;
        border-radius: 12px;
        color: #d0d0ff;
        transition: 0.25s;
        border: 1px solid rgba(255,255,255,0.04);
    }

    .nav-link:hover {
        background: rgba(124,58,237,0.25);
        color: #fff;
        transform: translateX(6px);
        box-shadow: 0 0 12px rgba(124, 58, 237, 0.5);
    }

    .sidebar .brand {
        font-size: 22px;
        font-weight: 800;
        color: #a470ff;
        text-shadow: 0 0 10px rgba(124,58,237,0.7);
    }

    .sidebar-profile {
        background: rgba(255,255,255,0.04);
        padding: 12px;
        border-radius: 14px;
        border: 1px solid rgba(255,255,255,0.06);
        margin-bottom: 20px;
    }

    .sidebar-profile img {
        width: 55px;
        height: 55px;
        border-radius: 12px;
        border: 2px solid rgba(124,58,237,0.7);
        box-shadow: 0 0 15px rgba(124,58,237,0.4);
        object-fit: cover;
    }

    .logout-btn-side {
        background: #b91c1c;
        border: none;
        width: 100%;
        padding: 10px;
        border-radius: 10px;
        margin-top: 15px;
        transition: 0.25s;
    }
    .logout-btn-side:hover {
        background: #dc2626;
        box-shadow: 0 0 15px rgba(255,50,50,0.6);
    }

    /* ===== NAVBAR (DARI FILE AWAL) ===== */
    .topbar{
        background:#111223;
        padding:15px 22px;
        display:flex;
        justify-content:space-between;
        align-items:center;
        border-bottom:1px solid rgba(255,255,255,0.06);
        margin-left:250px;
    }

    .app-title{
        font-size:20px;
        font-weight:700;
        color:#7c3aed;
        display:flex;
        align-items:center;
        gap:10px;
    }

    .profile-box{
        display:flex;
        align-items:center;
        gap:12px;
    }

    .profile-box img{
        width:45px;
        height:45px;
        border-radius:50%;
        object-fit:cover;
        border:2px solid #7c3aed;
    }

    .logout-btn{
        background:#7c3aed;
        color:white;
        padding:6px 14px;
        border-radius:8px;
        font-weight:600;
        font-size:14px;
        border:none;
    }

    /* CONTENT AREA */
    .content{
        padding:25px;
        margin-left:250px;
    }

    .card-box{
        background:rgba(255,255,255,0.05);
        border:1px solid rgba(255,255,255,0.07);
        border-radius:14px;
        padding:22px;
    }

    /* LOADING CINEMATIC */
    #loadingScreen{
        position:fixed;
        top:0;left:0;
        width:100%;height:100%;
        background:#05060f;
        display:flex;
        flex-direction:column;
        justify-content:center;
        align-items:center;
        z-index:999;
        gap:20px;
        opacity:1;
        transition:0.4s;
    }

    .loader-smoke{
        width:130px;
        height:130px;
        border-radius:50%;
        background:radial-gradient(circle, rgba(124,58,237,0.9), transparent 70%);
        animation:pulse 1.4s infinite alternate ease-in-out;
        filter:blur(12px);
    }

    @keyframes pulse{
        from{transform:scale(0.8); opacity:0.7;}
        to{transform:scale(1.3); opacity:1;}
    }

    .loading-text{
        font-size:22px;
        color:#a78bfa;
        animation:blink 1.4s infinite;
        letter-spacing:2px;
    }

    @keyframes blink{
        0%{opacity:0.3;}
        100%{opacity:1;}
    }
</style>

</head>
<body>

<!-- LOADING -->
<div id="loadingScreen">
    <div class="loader-smoke"></div>
    <div class="loading-text">Memuat Dashboard...</div>
</div>

<!-- SIDEBAR -->
<aside class="sidebar">
    <div class="brand mb-4">INVENTARIS • FUTURA</div>

    <div class="sidebar-profile d-flex align-items-center gap-3">
        <img id="sideProfile" src="kakasi.jpg">
        <div>
            <div id="sideName">Pengguna</div>
            <div class="muted" style="font-size:12px" id="sideRole">Administrator</div>
        </div>
    </div>

    <nav class="d-grid gap-2">
        <a href="#" class="nav-link"><i class="fa fa-chart-line me-2"></i> Dashboard</a>
        <a href="barang.html" class="nav-link"><i class="fa fa-boxes me-2"></i> Barang</a>
        <a href="supplier.html" class="nav-link"><i class="fa fa-truck me-2"></i> Supplier</a>
        <a href="kategori.html" class="nav-link"><i class="fa fa-tag me-2"></i> Kategori</a>
        <a href="transaksi.html" class="nav-link"><i class="fa fa-exchange-alt me-2"></i> Transaksi</a>
        <a href="laporan.html" class="nav-link"><i class="fa fa-exchange-alt me-2"></i> Laporan</a>
        <a href="profile.html" class="nav-link"><i class="fa fa-user me-2"></i> Profile</a>
    </nav>

    <button class="logout-btn-side" onclick="logout()">Logout</button>

    <div class="muted mt-3" style="font-size:11px; text-align:center;">
        Futuristic Glass Sidebar UI
    </div>
</aside>

<!-- NAVBAR -->
<div class="topbar">
    <div class="app-title">
        <i class="fa fa-box-open"></i> Inventaris Admin
    </div>

    <div class="profile-box">
        <img id="pfp" src="">
        <div id="pfname" style="font-size:15px;font-weight:600;"></div>
        <button class="logout-btn" onclick="logout()">Logout</button>
    </div>
</div>

<!-- CONTENT -->
<div class="content">

  <!-- TOP STATS (tetap) -->
  <div class="row g-3 mb-3">
    <div class="col-md-3">
      <div class="card-box">
        <div style="font-size:14px;color:#7c3aed;">Total Barang</div>
        <div style="font-size:28px;font-weight:700;">12,840</div>
        <div style="color:#4ade80;font-size:13px;margin-top:6px;">+12% bulan ini</div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card-box">
        <div style="font-size:14px;color:#7c3aed;">Barang Masuk Hari Ini</div>
        <div style="font-size:28px;font-weight:700;">312</div>
        <div style="color:#60a5fa;font-size:13px;margin-top:6px;">Real-time update</div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card-box">
        <div style="font-size:14px;color:#7c3aed;">Barang Keluar Hari Ini</div>
        <div style="font-size:28px;font-weight:700;">198</div>
        <div style="color:#f87171;font-size:13px;margin-top:6px;">-5% dari kemarin</div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card-box">
        <div style="font-size:14px;color:#7c3aed;">Barang Rusak</div>
        <div style="font-size:28px;font-weight:700;">41</div>
        <div style="color:#facc15;font-size:13px;margin-top:6px;">+2 kasus baru</div>
      </div>
    </div>
  </div>

  <!-- MAIN ROW: GLOBE LEFT + RIGHT PANELS -->
  <div class="row g-3">

    <!-- LEFT: big globe visual + 24h chart -->
    <div class="col-md-7">
      <div class="card-box" style="height:560px; overflow:hidden;">
        <div style="display:flex;gap:12px;align-items:flex-start;">
          <div style="flex:1;">
            <h5>Penyebaran Inventaris (Globe)</h5>
            <!-- gunakan gambar upload sebagai background / dekor -->
            <div style="height:340px;border-radius:10px;overflow:hidden;position:relative;background:#060617;">
              <img src="/mnt/data/7456049e-c421-44b2-84ea-3073ef724c7c.png"
                   alt="globe" style="width:100%;height:100%;object-fit:cover;opacity:0.18;filter:contrast(1.2) saturate(0.9)">
              <canvas id="glowMap" style="position:absolute;inset:0;"></canvas>
            </div>

            <div style="height:170px;margin-top:12px;">
              <h6 style="margin:0 0 8px 0;color:#aab0ff">Grafik Aktivitas 24 Jam</h6>
              <canvas id="miniLine" height="120"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- RIGHT: many small panels like the reference image -->
    <div class="col-md-5">
      <div class="card-box" style="height:560px; overflow:auto;">
        <!-- top small stats -->
        <div style="display:flex;gap:8px;margin-bottom:10px;">
          <div style="flex:1;padding:10px;border-radius:10px;background:linear-gradient(90deg, rgba(124,58,237,0.07), rgba(255,255,255,0.01));">
            <div style="font-size:12px;color:#9aa0ff">Tingkat Ketersediaan</div>
            <div style="font-weight:700;font-size:20px;margin-top:6px">87.2%</div>
          </div>
          <div style="flex:1;padding:10px;border-radius:10px;background:linear-gradient(90deg, rgba(30,144,255,0.04), rgba(255,255,255,0.01));">
            <div style="font-size:12px;color:#9aa0ff">Rata-Rata Peminjaman</div>
            <div style="font-weight:700;font-size:20px;margin-top:6px">3.4/hari</div>
          </div>
        </div>

        <!-- PIE + RADIAL -->
        <div style="display:flex;gap:10px;margin-bottom:12px;">
          <div style="flex:1;text-align:center">
            <h6 style="margin-bottom:6px;color:#aab0ff">Distribusi Kategori</h6>
            <canvas id="catPieSmall" style="max-width:220px;margin:0 auto"></canvas>
          </div>
          <div style="flex:1">
            <h6 style="margin-bottom:6px;color:#aab0ff">Jenis Transaksi</h6>
            <canvas id="radialType" style="max-width:180px;margin:8px auto"></canvas>
          </div>
        </div>

        <!-- video-like card -->
        <div style="display:flex;gap:10px;align-items:center;padding:12px;border-radius:10px;background:rgba(255,255,255,0.02);margin-bottom:12px">
          <div style="width:120px;height:70px;background:#000;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#7c3aed;font-weight:700;">
            ▶
          </div>
          <div>
            <div style="font-weight:700">Demo Inventory Flow</div>
            <div style="color:#999;font-size:13px;margin-top:6px">Video singkat alur penerimaan & distribusi</div>
          </div>
        </div>

        <!-- industry list / ranking like right bottom -->
        <div style="margin-bottom:10px">
          <h6 style="color:#aab0ff;margin-bottom:8px">Top Lokasi (by stok)</h6>
          <div style="display:flex;gap:8px;flex-direction:column">
            <div style="display:flex;justify-content:space-between;font-size:14px"><span>Gudang Pusat</span><strong>4,203</strong></div>
            <div style="display:flex;justify-content:space-between;font-size:14px"><span>Cabang Jakarta</span><strong>2,920</strong></div>
            <div style="display:flex;justify-content:space-between;font-size:14px"><span>Cabang Surabaya</span><strong>1,840</strong></div>
            <div style="display:flex;justify-content:space-between;font-size:14px"><span>Cabang Bandung</span><strong>1,120</strong></div>
            <div style="display:flex;justify-content:space-between;font-size:14px"><span>Cabang Medan</span><strong>920</strong></div>
          </div>
        </div>

        <!-- donut small percent -->
        <div style="margin-top:6px">
          <h6 style="color:#aab0ff;margin-bottom:8px">Kondisi Barang</h6>
          <div style="display:flex;gap:10px">
            <div style="flex:1;text-align:center">
              <canvas id="condDonut" style="max-width:120px;margin:0 auto"></canvas>
              <div style="color:#9aa0ff;font-size:13px;margin-top:6px">Baik 82%</div>
            </div>
            <div style="flex:1">
              <div style="font-size:13px;color:#cbd1ff">Perlu Service</div>
              <div style="font-weight:700;font-size:18px;margin-top:6px">9%</div>
              <div style="height:6px;background:#222;border-radius:99px;margin-top:8px;overflow:hidden">
                <div style="width:9%;height:100%;background:#facc15;border-radius:99px"></div>
              </div>

              <div style="font-size:13px;color:#cbd1ff;margin-top:12px">Rusak</div>
              <div style="font-weight:700;font-size:18px;margin-top:6px">9%</div>
              <div style="height:6px;background:#222;border-radius:99px;margin-top:8px;overflow:hidden">
                <div style="width:9%;height:100%;background:#f87171;border-radius:99px"></div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>

  </div>

</div>


<script>
    // Jika belum login, lempar balik
    if(localStorage.getItem("logged_in") !== "true"){
        window.location.href = "login.html";
    }

    // Ambil data profil
    let prof = JSON.parse(localStorage.getItem("profile_data") || "{}");

    document.getElementById("pfp").src = prof.photo || "kakasi.jpg";
    document.getElementById("pfname").innerText = prof.name || "Administrator";

    document.getElementById("sideProfile").src = prof.photo || "kakasi.jpg";
    document.getElementById("sideName").innerText = prof.name || "Administrator";

    // Loading cinematic
    setTimeout(() => {
        document.getElementById("loadingScreen").style.opacity = "0";
        setTimeout(() => {
            document.getElementById("loadingScreen").style.display = "none";
        }, 400);
    }, 2000);

    // Logout
    function logout(){
        localStorage.removeItem("logged_in");
        localStorage.removeItem("profile_data");

        document.getElementById("loadingScreen").style.opacity = "1";
        document.getElementById("loadingScreen").style.display = "flex";
        document.querySelector(".loading-text").innerText = "Logging out...";

        setTimeout(()=>{
            window.location.href = "login.html";
        }, 1500);
    }
    // PIE (kategori kecil)
  new Chart(document.getElementById("catPieSmall"), {
    type: "doughnut",
    data: {
      labels:["Elektronik","Furniture","ATK","Jaringan","Lainnya"],
      datasets:[{data:[38,20,18,14,10]}]
    },
    options:{cutout:"60%",plugins:{legend:{display:false}}}
  });

  // RADIAL / POLAR untuk jenis transaksi
  new Chart(document.getElementById("radialType"), {
    type: "polarArea",
    data: {
      labels:["Masuk","Keluar","Service","Hilang"],
      datasets:[{data:[45,30,15,10]}]
    },
    options:{plugins:{legend:{position:"right",labels:{color:"white"}}}}
  });

  // CONDITIONS donut
  new Chart(document.getElementById("condDonut"), {
    type: "doughnut",
    data:{labels:["Baik","Service","Rusak"],datasets:[{data:[82,9,9]}]},
    options:{cutout:"70%",plugins:{legend:{display:false}}}
  });

  // MINI LINE (24h) reuse earlier style
  new Chart(document.getElementById("miniLine"), {
    type:"line",
    data:{
      labels:["00","03","06","09","12","15","18","21"],
      datasets:[{data:[120,240,360,420,500,420,300,200],fill:true,tension:0.4}]
    },
    options:{plugins:{legend:{display:false}},scales:{x:{ticks:{color:"white"}},y:{ticks:{color:"white"},beginAtZero:true}}}
  });

  // GLOW MAP canvas (fake animated glow)
  (function(){
    const c = document.getElementById("glowMap");
    const ctx = c.getContext("2d");
    function resize(){ c.width = c.clientWidth; c.height = c.clientHeight; }
    resize(); window.addEventListener('resize', resize);
    let t=0;
    function draw(){
      ctx.clearRect(0,0,c.width,c.height);
      // subtle grid glow
      for(let i=0;i<6;i++){
        ctx.beginPath();
        ctx.shadowBlur = 40 - i*6;
        ctx.shadowColor = "rgba(124,58,237,0.6)";
        ctx.fillStyle = `rgba(124,58,237,${0.04 + i*0.02})`;
        const r = 40 + i*24 + Math.sin(t/10 + i)*8;
        ctx.beginPath();
        ctx.arc(c.width*0.45 + Math.sin(t/20+i)*30, c.height*0.45 + Math.cos(t/18+i)*20, r, 0, Math.PI*2);
        ctx.fill();
      }
      t+=0.8;
      requestAnimationFrame(draw);
    }
    draw();
  })();
</script>

</body>
</html>
